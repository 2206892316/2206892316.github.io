var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _GameUI = require("./script/GameUI");

var _GameUI2 = _interopRequireDefault(_GameUI);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
            reg("script/GameUI.js", _GameUI2.default);
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 640;
GameConfig.height = 1136;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "test/TestScene.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./script/GameUI":5}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _layaMaxUI = require("./ui/layaMaxUI");

var _layaMaxUI2 = _interopRequireDefault(_layaMaxUI);

var _MainScene = require("./script/MainScene");

var _MainScene2 = _interopRequireDefault(_MainScene);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		// Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		// if (GameConfig.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		// if (GameConfig.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		// if (GameConfig.stat) Laya.Stat.show();
		// Laya.alertGlobalError = true;

		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
	}

	_createClass(Main, [{
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			// new MainScene();
			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./script/MainScene":6,"./ui/layaMaxUI":9}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _MainScene = require("./MainScene");

var _MainScene2 = _interopRequireDefault(_MainScene);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Ball = function (_Laya$Script3D) {
    _inherits(Ball, _Laya$Script3D);

    function Ball() {
        _classCallCheck(this, Ball);

        var _this = _possibleConstructorReturn(this, (Ball.__proto__ || Object.getPrototypeOf(Ball)).call(this));

        _this.time = 0;
        //毫秒
        _this.totalTime = 1000;

        _this.startPos = null;
        _this.betweenPos = null;
        _this.endPos = null;
        //得分环
        _this.ring = null;
        // this.getScore = 0;
        _this.ball = 0;

        _this.isSpawn = false;
        return _this;
    }

    _createClass(Ball, [{
        key: "onStart",
        value: function onStart() {
            this.onInit();

            Laya.timer.once(4000, this, function () {
                this.owner.destroy(true);
            });
            console.log(this.owner._children);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            if (this.isSpawn) this.onBezier();
        }
    }, {
        key: "onTriggerEnter",
        value: function onTriggerEnter(other) {
            if (other.owner.name === "intoRim") {
                Laya.stage.event("getScore");
                this.ring.active = true;
                Laya.timer.frameOnce(16, this, function () {
                    if (this.ring.active) this.ring.active = false;
                });
                console.log("球进了");
            }

            if (other.owner.name === "outRim") {
                Laya.stage.event("outScore");
                console.log("球没进");
            }
        }
    }, {
        key: "onCollisionEnter",
        value: function onCollisionEnter(other) {
            if (other.other.owner.name === "Rim") {
                Laya.stage.event("outScore");
            }
        }
    }, {
        key: "onInit",
        value: function onInit() {
            this.ring = this.owner.parent.getComponent(_MainScene2.default).ring;
        }
    }, {
        key: "onBezier",
        value: function onBezier() {
            //以毫秒为单位
            this.time += Laya.timer.delta;
            if (this.time / this.totalTime <= 1.005) {
                var time = this.time / this.totalTime;
                var pos = this.Bezier(this.startPos, this.betweenPos, this.endPos, time);

                this.owner.transform.position = pos;

                //球体绕自身X轴做旋转
                var rotationEuler = this.owner.transform.rotationEuler;
                rotationEuler.setValue(Math.random() * -360, 0, 0);
                this.owner.transform.rotationEuler = rotationEuler;
            }
        }

        //贝塞尔曲线

    }, {
        key: "Bezier",
        value: function Bezier(p0, p1, p2, t) {

            var p0p1 = new Laya.Vector3(0, 0, 0);
            var p1p2 = new Laya.Vector3(0, 0, 0);
            var result = new Laya.Vector3(0, 0, 0);

            p0p1.x = (1 - t) * p0.x + t * p1.x;
            p0p1.y = (1 - t) * p0.y + t * p1.y;
            p0p1.z = (1 - t) * p0.z + t * p1.z;

            p1p2.x = (1 - t) * p1.x + t * p2.x;
            p1p2.y = (1 - t) * p1.y + t * p2.y;
            p1p2.z = (1 - t) * p1.z + t * p2.z;

            result.x = (1 - t) * p0p1.x + t * p1p2.x;
            result.y = (1 - t) * p0p1.y + t * p1p2.y;
            result.z = (1 - t) * p0p1.z + t * p1p2.z;

            return result;
        }
    }]);

    return Ball;
}(Laya.Script3D);

exports.default = Ball;

},{"./MainScene":6}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Ball = require("./Ball");

var _Ball2 = _interopRequireDefault(_Ball);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BallSpawn = function (_Laya$Script3D) {
    _inherits(BallSpawn, _Laya$Script3D);

    function BallSpawn() {
        _classCallCheck(this, BallSpawn);

        var _this = _possibleConstructorReturn(this, (BallSpawn.__proto__ || Object.getPrototypeOf(BallSpawn)).call(this));

        _this.ball = null;
        _this.startPos = 0;
        _this.betweenPos = 0;
        _this.endPos = 0;

        _this.time = 0;
        _this.deltaTime = 2000;
        return _this;
    }

    _createClass(BallSpawn, [{
        key: "onStart",
        value: function onStart() {
            this.onShootMuchBall(3);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            this.time += Laya.timer.delta;
            if (this.time >= this.deltaTime) {
                this.time = 0;
                this.onCreatBall();
            }
        }

        //控制2秒内投出几个球

    }, {
        key: "onShootMuchBall",
        value: function onShootMuchBall(num) {
            // this.deltaTime = 2000 / num * (Math.random() + 0.5);

            this.deltaTime = 2000 / num * 2;
        }

        //创建篮球

    }, {
        key: "onCreatBall",
        value: function onCreatBall() {
            var clone = Laya.Sprite3D.instantiate(this.ball);

            var effect = clone.getChildByName("effect");
            Laya.stage.event("effect", effect);

            var ball = clone.getComponent(_Ball2.default);

            ball.startPos = this.startPos;
            ball.betweenPos = this.betweenPos;
            ball.endPos = new Laya.Vector3(this.Random(-0.2, 0.2), this.endPos.y, this.endPos.z);

            ball.isSpawn = true;
            this.owner.addChild(clone);
        }

        //取值返回[-x,x);

    }, {
        key: "Random",
        value: function Random(x) {
            return Math.random() * 2 * x - x;
        }
    }]);

    return BallSpawn;
}(Laya.Script3D);

exports.default = BallSpawn;

},{"./Ball":3}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _MainScene = require("./MainScene");

var _MainScene2 = _interopRequireDefault(_MainScene);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联
 * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果
 * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。
 */
var GameUI = function (_Laya$Scene) {
    _inherits(GameUI, _Laya$Scene);

    function GameUI() {
        _classCallCheck(this, GameUI);

        //加载场景文件
        var _this = _possibleConstructorReturn(this, (GameUI.__proto__ || Object.getPrototypeOf(GameUI)).call(this));

        _this.loadScene("test/TestScene.scene");

        // Laya.Stat.show();
        //调用DebugPanel调试面板
        var resource = [{ url: "LayaScene_LayaExport/Conventional/LayaExport.ls", type: Laya3D.HIERARCHY, priority: 1 }];
        Laya.loader.create(resource, Laya.Handler.create(_this, _this.onLoadFinish));
        return _this;
    }

    _createClass(GameUI, [{
        key: "onLoadFinish",
        value: function onLoadFinish() {
            var fightScene = Laya.Loader.getRes("LayaScene_LayaExport/Conventional/LayaExport.ls");
            console.log(fightScene);
            Laya.stage.addChildAt(fightScene, 0);
            fightScene.addComponent(_MainScene2.default);
        }
    }]);

    return GameUI;
}(Laya.Scene);

exports.default = GameUI;

},{"./MainScene":6}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Ball = require("./Ball");

var _Ball2 = _interopRequireDefault(_Ball);

var _RimController = require("./RimController");

var _RimController2 = _interopRequireDefault(_RimController);

var _BallSpawn = require("./BallSpawn");

var _BallSpawn2 = _interopRequireDefault(_BallSpawn);

var _UIManager = require("./uiscript/UIManager");

var _UIManager2 = _interopRequireDefault(_UIManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MainScene = function (_Laya$Script3D) {
    _inherits(MainScene, _Laya$Script3D);

    function MainScene() {
        _classCallCheck(this, MainScene);

        var _this = _possibleConstructorReturn(this, (MainScene.__proto__ || Object.getPrototypeOf(MainScene)).call(this));

        _this.scene = 0;
        _this.ball = 0;

        //* * * * * * * * * 初始化的数值
        _this.rim = null;
        _this.camera = null;
        _this.rimModel = null;
        _this.startPos = 0;
        _this.betweenPos = 0;
        _this.endPos = 0;
        _this.uiScene = null;
        _this.ring = null;
        // this.getScore = 0;
        //* * * * * * * * *
        return _this;
    }

    _createClass(MainScene, [{
        key: "onStart",
        value: function onStart() {

            //读取场景
            this.scene = Laya.loader.getRes("LayaScene_LayaExport/Conventional/LayaExport.ls");

            this.onInit();

            this.addRimController();

            this.addUIManager();

            this.addBallSpawn();
        }
    }, {
        key: "onInit",
        value: function onInit() {
            //获取篮筐父节点
            this.rim = this.scene.getChildByName("RimMoveNode");
            //获取摄像机
            this.camera = this.scene.getChildByName("Main Camera");
            //获取篮筐
            this.rimModel = this.rim.getChildByName("Rim");
            //获取篮筐的环
            this.ring = this.rim.getChildByName("Ring");
            this.ring.active = false;
            //获取得分的触发器
            // this.getScore = this.rim.getChildByName("GetScore");
            //获取球的运动轨迹节点的父节点
            var bezierNode = this.scene.getChildByName("Bezier");
            //获取球的初始位置
            this.startPos = bezierNode.getChildByName("Start");
            //获取球的过渡位置
            this.betweenPos = bezierNode.getChildByName("Between");
            //获取球的终点位置
            this.endPos = bezierNode.getChildByName("End");
            //获取球的预制体
            var ball = this.scene.getChildByName("ball");
            this.ball = Laya.Sprite3D.instantiate(ball);
            this.ball.addComponent(_Ball2.default);
            //取到球的预制体后将球关闭
            ball.active = false;
        }
    }, {
        key: "addUIManager",
        value: function addUIManager() {
            var uiManager = this.scene.addComponent(_UIManager2.default);
            uiManager.camera = this.camera;
            uiManager.rim = this.rimModel;
        }
    }, {
        key: "addRimController",
        value: function addRimController() {
            //添加篮筐控制组件
            var rimController = this.scene.addComponent(_RimController2.default);

            //赋值
            rimController.mainCamera = this.camera;
            rimController.rim = this.rim;
            // rimController.ring = this.ring;

            //添加Unlit材质球
            // let material = new Laya.UnlitMaterial();
            // material.albedoColor = new Laya.Vector3(.8, 0, 0);
            // material.albedoIntensity = 1;

            // let effectMaterial = new Laya.EffectMaterial();
            // Laya.Texture2D.load("LayaScene_LayaExport/Conventional/Assets/Textures/Tex_Bingo.png", Laya.Handler.create(this, function (tex) {
            //     effectMaterial.texture = tex;
            //     effectMaterial.albedoColor = new Laya.Vector3(.8, 0, 0);
            // }))

            //更换篮筐材质
            // this.rimModel.meshRenderer.material = material;
            // this.ring.meshRenderer.material = effectMaterial;
            // console.log(this.rimModel);
        }
    }, {
        key: "addBallSpawn",
        value: function addBallSpawn() {
            //添加篮球生成器
            var ballSpawn = this.scene.addComponent(_BallSpawn2.default);
            ballSpawn.ball = this.ball;
            ballSpawn.startPos = this.startPos.transform.position;
            ballSpawn.betweenPos = this.betweenPos.transform.position;
            ballSpawn.endPos = this.endPos.transform.position;
            // ballSpawn.getScore = this.getScore;
        }
    }]);

    return MainScene;
}(Laya.Script3D);

exports.default = MainScene;

},{"./Ball":3,"./BallSpawn":4,"./RimController":7,"./uiscript/UIManager":8}],7:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _MainScene = require("./MainScene");

var _MainScene2 = _interopRequireDefault(_MainScene);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } //import RingAnimatorStateScript from "./RingAnimatorStateScript";


var RimController = function (_Laya$Script3D) {
    _inherits(RimController, _Laya$Script3D);

    function RimController() {
        _classCallCheck(this, RimController);

        var _this = _possibleConstructorReturn(this, (RimController.__proto__ || Object.getPrototypeOf(RimController)).call(this));

        _this.ray = 0;
        _this.point = 0;
        _this.rim = 0;
        _this.mainCamera = null;
        _this.isClick = false;
        return _this;
    }

    _createClass(RimController, [{
        key: "onStart",
        value: function onStart() {
            //this.initCannon();

            var vectorZero = new Laya.Vector3(0, 0, 0);
            this.ray = new Laya.Ray(vectorZero, vectorZero);
            this.point = new Laya.Vector2();

            Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.MouseDown);
            Laya.stage.on(Laya.Event.MOUSE_UP, this, this.MouseUp);
        }
    }, {
        key: "MouseDown",
        value: function MouseDown() {
            this.isClick = true;
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            this.RimMove();
        }
    }, {
        key: "RimMove",
        value: function RimMove() {
            if (this.isClick) {
                this.point.x = Laya.MouseManager.instance.mouseX;
                this.point.y = Laya.MouseManager.instance.mouseY;

                this.mainCamera.viewportPointToRay(this.point, this.ray);
                this.rayCastHit = new Laya.HitResult();
                this.owner.physicsSimulation.rayCast(this.ray, this.rayCastHit);

                if (this.rayCastHit.succeeded && this.rayCastHit.collider.owner.name === "RimBackground") {
                    this.rim.transform.position = new Laya.Vector3(this.rayCastHit.point.x, this.rim.transform.position.y, this.rim.transform.position.z);
                }
            }
        }
    }, {
        key: "MouseUp",
        value: function MouseUp() {
            this.isClick = false;
        }
    }, {
        key: "initCannon",
        value: function initCannon() {
            var world = new CANNON.World();
            world.broadphase = new CANNON.NaiveBroadphase();
            world.gravity.set(0, -9.82, 0);
            world.solver.iterations = 20;

            // Materials
            var clothMaterial = new CANNON.Material();
            var sphereMaterial = new CANNON.Material();
            var clothSphereContactMaterial = new CANNON.ContactMaterial(clothMaterial, sphereMaterial, 0.0, // friction coefficient
            0.0 // restitution
            );

            // Adjust constraint equation parameters for ground/ground contact
            clothSphereContactMaterial.contactEquationStiffness = 1e9;
            clothSphereContactMaterial.contactEquationRelaxation = 3;

            // Add contact material to the world
            world.addContactMaterial(clothSphereContactMaterial);

            // Create sphere
            var sphereShape = new CANNON.Sphere(0.15);
            var sphereBody = new CANNON.Body({
                mass: 0
            });

            sphereBody.addShape(sphereShape);
            sphereBody.position.set(0, 0, 0);
            world.add(sphereBody);

            var particles = [];
            //获取网格顶点
            Laya.Mesh.load("res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm", Laya.Handler.create(this, this.loadSprite3D));

            // for ( var i = 0, il = Nx+1; i !== il; i++ ) {
            //     particles.push([]);
            //     for ( var j = 0, jl = Ny+1; j !== jl; j++ ) {
            //         var idx = j*(Nx+1) + i;
            //         var p = clothFunction(i/(Nx+1), j/(Ny+1));
            //         var particle = new CANNON.Body({
            //             mass: j==Ny ? 0 : mass
            //         });
            //         particle.addShape(new CANNON.Particle());
            //         particle.linearDamping = 0.5;
            //         particle.position.set(
            //             p.x,
            //             p.y-Ny * 0.9 * restDistance,
            //             p.z
            //         );
            //         particles[i].push(particle);
            //         world.add(particle);
            //         particle.velocity.set(0,0,-0.1*(Ny-j));
            //     }
            // }
        }
    }, {
        key: "loadSprite3D",
        value: function loadSprite3D(mesh) {}
    }]);

    return RimController;
}(Laya.Script3D);

exports.default = RimController;

},{"./MainScene":6}],8:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var UIManager = function (_Laya$Script3D) {
    _inherits(UIManager, _Laya$Script3D);

    function UIManager() {
        _classCallCheck(this, UIManager);

        var _this = _possibleConstructorReturn(this, (UIManager.__proto__ || Object.getPrototypeOf(UIManager)).call(this));

        _this.camera = null;
        _this.rim = null;

        _this.scoreLabel = 0;
        _this.singleScoreLabel = 0;
        _this.sprite = 0;
        _this.score = 0;
        _this.totalScore = 0;
        return _this;
    }

    _createClass(UIManager, [{
        key: "onStart",
        value: function onStart() {
            this.getSorceLabel();
            this.registerEvent();
        }
    }, {
        key: "registerEvent",
        value: function registerEvent() {
            //如果投中便得分！(Ball)
            Laya.stage.on("getScore", this, function () {
                var tween = Laya.Tween.to(this.singleScoreLabel, { y: -40, alpha: 1 }, 300, null, Laya.Handler.create(this, function () {
                    this.singleScoreLabel.alpha = 0;
                    this.singleScoreLabel.y = 0;
                }));

                this.score += 1;

                if (this.score <= 1) this.singleScoreLabel.color = "#ffffff";else this.singleScoreLabel.color = "#fff970";

                this.totalScore += this.score;

                this.singleScoreLabel.text = this.score;
                this.scoreLabel.text = "Score :" + this.totalScore;
            });

            //如果碰到球框或者败肾，则清空连中加成分数(Ball)
            Laya.stage.on("outScore", this, function () {
                this.score = 0;
            });

            //如果没有连续投中，则关闭特效(BallSpawn)
            Laya.stage.on("effect", this, function (e) {
                if (this.score <= 1) {
                    e.active = false;
                }
            });
        }

        //获取UI场景下的两个Label

    }, {
        key: "getSorceLabel",
        value: function getSorceLabel() {
            //找到UI场景的根节点
            var root = Laya.stage.getChildByName("root");

            //获取到GameUI对象
            var gameUI = root.getChildAt(0);
            this.scoreLabel = gameUI.getChildAt(0);
            this.sprite = gameUI.getChildAt(1);
            this.singleScoreLabel = this.sprite.getChildAt(0);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            this.WorldToViewPos();
        }

        //世界转视图坐标

    }, {
        key: "WorldToViewPos",
        value: function WorldToViewPos() {
            var outPos = new Laya.Vector3(0, 0, 0);
            this.camera.viewport.project(this.rim.transform.position, this.camera.projectionViewMatrix, outPos);
            this.sprite.x = outPos.x - this.sprite.width / 2;
            this.sprite.y = outPos.y - this.sprite.height / 2;
        }
    }]);

    return UIManager;
}(Laya.Script3D);

exports.default = UIManager;

},{}],9:[function(require,module,exports){
"use strict";

/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var View = laya.ui.View;
var Dialog = laya.ui.Dialog;
var Scene = Laya.Scene;
var REG = Laya.ClassUtils.regClass;
var TestSceneUI = function (_super) {
	function TestSceneUI() {

		TestSceneUI.__super.call(this);
	}
	//	CLASS$(TestSceneUI,'ui.test.TestSceneUI',_super);
	var __proto__ = TestSceneUI.prototype;
	__proto__.createChildren = function () {
		_super.prototype.createChildren.call(this);
		this.loadScene("test/TestScene");
	};
	return TestSceneUI;
}(Scene);

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6L0xheWFBaXJJREUvTGF5YUFpcklERTIuMTEuMC9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvR2FtZUNvbmZpZy5qcyIsInNyYy9NYWluLmpzIiwic3JjL3NjcmlwdC9CYWxsLmpzIiwic3JjL3NjcmlwdC9CYWxsU3Bhd24uanMiLCJzcmMvc2NyaXB0L0dhbWVVSS5qcyIsInNyYy9zY3JpcHQvTWFpblNjZW5lLmpzIiwic3JjL3NjcmlwdC9SaW1Db250cm9sbGVyLmpzIiwic3JjL3NjcmlwdC91aXNjcmlwdC9VSU1hbmFnZXIuanMiLCJzcmMvdWkvbGF5YU1heFVJLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7cWpCQ1ZBOzs7QUFDQTs7Ozs7Ozs7SUFFcUIsVTs7Ozs7OzsrQkFDSDtBQUNWO0FBQ0EsZ0JBQUksTUFBTSxLQUFLLFVBQUwsQ0FBZ0IsUUFBMUI7QUFDTixnQkFBSSxrQkFBSixFQUF1QixnQkFBdkI7QUFDRzs7Ozs7O2tCQUxnQixVOztBQU9yQixXQUFXLEtBQVgsR0FBbUIsR0FBbkI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsSUFBcEI7QUFDQSxXQUFXLFNBQVgsR0FBc0IsWUFBdEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsTUFBeEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsS0FBcEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsTUFBcEI7QUFDQSxXQUFXLFVBQVgsR0FBd0Isc0JBQXhCO0FBQ0EsV0FBVyxTQUFYLEdBQXVCLEVBQXZCO0FBQ0EsV0FBVyxLQUFYLEdBQW1CLEtBQW5CO0FBQ0EsV0FBVyxJQUFYLEdBQWtCLEtBQWxCO0FBQ0EsV0FBVyxZQUFYLEdBQTBCLEtBQTFCO0FBQ0EsV0FBVyxpQkFBWCxHQUErQixJQUEvQjs7QUFFQSxXQUFXLElBQVg7Ozs7Ozs7QUN2QkM7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ZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xuaW1wb3J0IEdhbWVVSSBmcm9tIFwiLi9zY3JpcHQvR2FtZVVJXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZyB7XG4gICAgc3RhdGljIGluaXQoKSB7XG4gICAgICAgIC8v5rOo5YaMU2NyaXB05oiW6ICFUnVudGltZeW8leeUqFxuICAgICAgICBsZXQgcmVnID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xuXHRcdHJlZyhcInNjcmlwdC9HYW1lVUkuanNcIixHYW1lVUkpO1xuICAgIH1cbn1cbkdhbWVDb25maWcud2lkdGggPSA2NDA7XG5HYW1lQ29uZmlnLmhlaWdodCA9IDExMzY7XG5HYW1lQ29uZmlnLnNjYWxlTW9kZSA9XCJmaXhlZHdpZHRoXCI7XG5HYW1lQ29uZmlnLnNjcmVlbk1vZGUgPSBcIm5vbmVcIjtcbkdhbWVDb25maWcuYWxpZ25WID0gXCJ0b3BcIjtcbkdhbWVDb25maWcuYWxpZ25IID0gXCJsZWZ0XCI7XG5HYW1lQ29uZmlnLnN0YXJ0U2NlbmUgPSBcInRlc3QvVGVzdFNjZW5lLnNjZW5lXCI7XG5HYW1lQ29uZmlnLnNjZW5lUm9vdCA9IFwiXCI7XG5HYW1lQ29uZmlnLmRlYnVnID0gZmFsc2U7XG5HYW1lQ29uZmlnLnN0YXQgPSBmYWxzZTtcbkdhbWVDb25maWcucGh5c2ljc0RlYnVnID0gZmFsc2U7XG5HYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uID0gdHJ1ZTtcblxuR2FtZUNvbmZpZy5pbml0KCk7XG4iLCLvu79pbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmltcG9ydCB1aSBmcm9tIFwiLi91aS9sYXlhTWF4VUlcIjtcclxuaW1wb3J0IE1haW5TY2VuZSBmcm9tIFwiLi9zY3JpcHQvTWFpblNjZW5lXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XHJcblx0XHRpZiAod2luZG93W1wiTGF5YTNEXCJdKSBMYXlhM0QuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCk7XHJcblx0XHRlbHNlIExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCwgTGF5YVtcIldlYkdMXCJdKTtcclxuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG5cdFx0Ly8gTGF5YVtcIkRlYnVnUGFuZWxcIl0gJiYgTGF5YVtcIkRlYnVnUGFuZWxcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5hbGlnblYgPSBHYW1lQ29uZmlnLmFsaWduVjtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25IID0gR2FtZUNvbmZpZy5hbGlnbkg7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHQvLyBpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0Ly8gaWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdC8vIGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHQvLyBMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cdH1cclxuXHJcblx0b25WZXJzaW9uTG9hZGVkKCkge1xyXG5cdFx0Ly/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuXHRcdExheWEuQXRsYXNJbmZvTWFuYWdlci5lbmFibGUoXCJmaWxlY29uZmlnLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uQ29uZmlnTG9hZGVkKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbmZpZ0xvYWRlZCgpIHtcclxuXHRcdC8vIG5ldyBNYWluU2NlbmUoKTtcclxuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXHJcblx0XHRHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsImltcG9ydCBNYWluU2NlbmUgZnJvbSBcIi4vTWFpblNjZW5lXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYWxsIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMudGltZSA9IDA7XHJcbiAgICAgICAgLy/mr6vnp5JcclxuICAgICAgICB0aGlzLnRvdGFsVGltZSA9IDEwMDA7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnRQb3MgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYmV0d2VlblBvcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbmRQb3MgPSBudWxsO1xyXG4gICAgICAgIC8v5b6X5YiG546vXHJcbiAgICAgICAgdGhpcy5yaW5nID0gbnVsbDtcclxuICAgICAgICAvLyB0aGlzLmdldFNjb3JlID0gMDtcclxuICAgICAgICB0aGlzLmJhbGwgPSAwO1xyXG5cclxuICAgICAgICB0aGlzLmlzU3Bhd24gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMub25Jbml0KCk7XHJcblxyXG4gICAgICAgIExheWEudGltZXIub25jZSg0MDAwLCB0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIuZGVzdHJveSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm93bmVyLl9jaGlsZHJlbilcclxuICAgIH1cclxuXHJcbiAgICBvblVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1NwYXduKVxyXG4gICAgICAgICAgICB0aGlzLm9uQmV6aWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25UcmlnZ2VyRW50ZXIob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIub3duZXIubmFtZSA9PT0gXCJpbnRvUmltXCIpIHtcclxuICAgICAgICAgICAgTGF5YS5zdGFnZS5ldmVudChcImdldFNjb3JlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnJpbmcuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgTGF5YS50aW1lci5mcmFtZU9uY2UoMTYsIHRoaXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJpbmcuYWN0aXZlKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmluZy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi55CD6L+b5LqGXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG90aGVyLm93bmVyLm5hbWUgPT09IFwib3V0UmltXCIpIHtcclxuICAgICAgICAgICAgTGF5YS5zdGFnZS5ldmVudChcIm91dFNjb3JlXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIueQg+ayoei/m1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Db2xsaXNpb25FbnRlcihvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlci5vdGhlci5vd25lci5uYW1lID09PSBcIlJpbVwiKSB7XHJcbiAgICAgICAgICAgIExheWEuc3RhZ2UuZXZlbnQoXCJvdXRTY29yZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMucmluZyA9IHRoaXMub3duZXIucGFyZW50LmdldENvbXBvbmVudChNYWluU2NlbmUpLnJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgb25CZXppZXIoKSB7XHJcbiAgICAgICAgLy/ku6Xmr6vnp5LkuLrljZXkvY1cclxuICAgICAgICB0aGlzLnRpbWUgKz0gTGF5YS50aW1lci5kZWx0YTtcclxuICAgICAgICBpZiAodGhpcy50aW1lIC8gdGhpcy50b3RhbFRpbWUgPD0gMS4wMDUpIHtcclxuICAgICAgICAgICAgbGV0IHRpbWUgPSB0aGlzLnRpbWUgLyB0aGlzLnRvdGFsVGltZTtcclxuICAgICAgICAgICAgbGV0IHBvcyA9IHRoaXMuQmV6aWVyKHRoaXMuc3RhcnRQb3MsIHRoaXMuYmV0d2VlblBvcywgdGhpcy5lbmRQb3MsIHRpbWUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vd25lci50cmFuc2Zvcm0ucG9zaXRpb24gPSBwb3M7XHJcblxyXG4gICAgICAgICAgICAvL+eQg+S9k+e7leiHqui6q1jovbTlgZrml4vovaxcclxuICAgICAgICAgICAgbGV0IHJvdGF0aW9uRXVsZXIgPSB0aGlzLm93bmVyLnRyYW5zZm9ybS5yb3RhdGlvbkV1bGVyO1xyXG4gICAgICAgICAgICByb3RhdGlvbkV1bGVyLnNldFZhbHVlKE1hdGgucmFuZG9tKCkgKiAtMzYwLCAwLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5vd25lci50cmFuc2Zvcm0ucm90YXRpb25FdWxlciA9IHJvdGF0aW9uRXVsZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8v6LSd5aGe5bCU5puy57q/XHJcbiAgICBCZXppZXIocDAsIHAxLCBwMiwgdCkge1xyXG5cclxuICAgICAgICBsZXQgcDBwMSA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgbGV0IHAxcDIgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIDApO1xyXG5cclxuICAgICAgICBwMHAxLnggPSAoMSAtIHQpICogcDAueCArIHQgKiBwMS54O1xyXG4gICAgICAgIHAwcDEueSA9ICgxIC0gdCkgKiBwMC55ICsgdCAqIHAxLnk7XHJcbiAgICAgICAgcDBwMS56ID0gKDEgLSB0KSAqIHAwLnogKyB0ICogcDEuejtcclxuXHJcbiAgICAgICAgcDFwMi54ID0gKDEgLSB0KSAqIHAxLnggKyB0ICogcDIueDtcclxuICAgICAgICBwMXAyLnkgPSAoMSAtIHQpICogcDEueSArIHQgKiBwMi55O1xyXG4gICAgICAgIHAxcDIueiA9ICgxIC0gdCkgKiBwMS56ICsgdCAqIHAyLno7XHJcblxyXG4gICAgICAgIHJlc3VsdC54ID0gKDEgLSB0KSAqIHAwcDEueCArIHQgKiBwMXAyLng7XHJcbiAgICAgICAgcmVzdWx0LnkgPSAoMSAtIHQpICogcDBwMS55ICsgdCAqIHAxcDIueTtcclxuICAgICAgICByZXN1bHQueiA9ICgxIC0gdCkgKiBwMHAxLnogKyB0ICogcDFwMi56O1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEJhbGwgZnJvbSBcIi4vQmFsbFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFsbFNwYXduIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3RhcnRQb3MgPSAwO1xyXG4gICAgICAgIHRoaXMuYmV0d2VlblBvcyA9IDA7XHJcbiAgICAgICAgdGhpcy5lbmRQb3MgPSAwO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuZGVsdGFUaW1lID0gMjAwMDtcclxuICAgIH1cclxuXHJcbiAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMub25TaG9vdE11Y2hCYWxsKDMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMudGltZSArPSBMYXlhLnRpbWVyLmRlbHRhO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWUgPj0gdGhpcy5kZWx0YVRpbWUpIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5vbkNyZWF0QmFsbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL+aOp+WItjLnp5LlhoXmipXlh7rlh6DkuKrnkINcclxuICAgIG9uU2hvb3RNdWNoQmFsbChudW0pIHtcclxuICAgICAgICAvLyB0aGlzLmRlbHRhVGltZSA9IDIwMDAgLyBudW0gKiAoTWF0aC5yYW5kb20oKSArIDAuNSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5kZWx0YVRpbWUgPSAyMDAwIC8gbnVtICogMjtcclxuICAgIH1cclxuXHJcbiAgICAvL+WIm+W7uuevrueQg1xyXG4gICAgb25DcmVhdEJhbGwoKSB7XHJcbiAgICAgICAgbGV0IGNsb25lID0gTGF5YS5TcHJpdGUzRC5pbnN0YW50aWF0ZSh0aGlzLmJhbGwpO1xyXG5cclxuICAgICAgICBsZXQgZWZmZWN0ID0gY2xvbmUuZ2V0Q2hpbGRCeU5hbWUoXCJlZmZlY3RcIik7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5ldmVudChcImVmZmVjdFwiLCBlZmZlY3QpO1xyXG5cclxuICAgICAgICBsZXQgYmFsbCA9IGNsb25lLmdldENvbXBvbmVudChCYWxsKTtcclxuXHJcbiAgICAgICAgYmFsbC5zdGFydFBvcyA9IHRoaXMuc3RhcnRQb3M7XHJcbiAgICAgICAgYmFsbC5iZXR3ZWVuUG9zID0gdGhpcy5iZXR3ZWVuUG9zO1xyXG4gICAgICAgIGJhbGwuZW5kUG9zID0gbmV3IExheWEuVmVjdG9yMyh0aGlzLlJhbmRvbSgtMC4yLCAwLjIpLCB0aGlzLmVuZFBvcy55LCB0aGlzLmVuZFBvcy56KTtcclxuXHJcbiAgICAgICAgYmFsbC5pc1NwYXduID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm93bmVyLmFkZENoaWxkKGNsb25lKTtcclxuICAgIH1cclxuXHJcbiAgICAvL+WPluWAvOi/lOWbnlsteCx4KTtcclxuICAgIFJhbmRvbSh4KSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAyICogeCAtIHg7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgTWFpblNjZW5lIGZyb20gXCIuL01haW5TY2VuZVwiO1xyXG5cclxuLyoqXHJcbiAqIOacrOekuuS+i+mHh+eUqOmdnuiEmuacrOeahOaWueW8j+WunueOsO+8jOiAjOS9v+eUqOe7p+aJv+mhtemdouWfuuexu++8jOWunueOsOmhtemdoumAu+i+keOAguWcqElERemHjOmdouiuvue9ruWcuuaZr+eahFJ1bnRpbWXlsZ7mgKfljbPlj6/lkozlnLrmma/ov5vooYzlhbPogZRcclxuICog55u45q+U6ISa5pys5pa55byP77yM57un5om/5byP6aG16Z2i57G777yM5Y+v5Lul55u05o6l5L2/55So6aG16Z2i5a6a5LmJ55qE5bGe5oCn77yI6YCa6L+HSURF5YaFdmFy5bGe5oCn5a6a5LmJ77yJ77yM5q+U5aaCdGhpcy50aXBMYmxs77yMdGhpcy5zY29yZUxibO+8jOWFt+acieS7o+eggeaPkOekuuaViOaenFxyXG4gKiDlu7rorq7vvJrlpoLmnpzmmK/pobXpnaLnuqfnmoTpgLvovpHvvIzpnIDopoHpopHnuYHorr/pl67pobXpnaLlhoXlpJrkuKrlhYPntKDvvIzkvb/nlKjnu6fmib/lvI/lhpnms5XvvIzlpoLmnpzmmK/ni6znq4vlsI/mqKHlnZfvvIzlip/og73ljZXkuIDvvIzlu7rorq7nlKjohJrmnKzmlrnlvI/lrp7njrDvvIzmr5TlpoLlrZDlvLnohJrmnKzjgIJcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVVSSBleHRlbmRzIExheWEuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICAvL+WKoOi9veWcuuaZr+aWh+S7tlxyXG4gICAgICAgIHRoaXMubG9hZFNjZW5lKFwidGVzdC9UZXN0U2NlbmUuc2NlbmVcIik7XHJcblxyXG4gICAgICAgIC8vIExheWEuU3RhdC5zaG93KCk7XHJcbiAgICAgICAgLy/osIPnlKhEZWJ1Z1BhbmVs6LCD6K+V6Z2i5p2/XHJcbiAgICAgICAgdmFyIHJlc291cmNlID0gW1xyXG4gICAgICAgICAgICB7IHVybDogXCJMYXlhU2NlbmVfTGF5YUV4cG9ydC9Db252ZW50aW9uYWwvTGF5YUV4cG9ydC5sc1wiLCB0eXBlOiBMYXlhM0QuSElFUkFSQ0hZLCBwcmlvcml0eTogMSB9XHJcbiAgICAgICAgXVxyXG4gICAgICAgIExheWEubG9hZGVyLmNyZWF0ZShyZXNvdXJjZSwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uTG9hZEZpbmlzaCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTG9hZEZpbmlzaCgpIHtcclxuICAgICAgICB2YXIgZmlnaHRTY2VuZSA9IExheWEuTG9hZGVyLmdldFJlcyhcIkxheWFTY2VuZV9MYXlhRXhwb3J0L0NvbnZlbnRpb25hbC9MYXlhRXhwb3J0LmxzXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGZpZ2h0U2NlbmUpXHJcbiAgICAgICAgTGF5YS5zdGFnZS5hZGRDaGlsZEF0KGZpZ2h0U2NlbmUsIDApO1xyXG4gICAgICAgIGZpZ2h0U2NlbmUuYWRkQ29tcG9uZW50KE1haW5TY2VuZSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQmFsbE1hbmFnZXIgZnJvbSBcIi4vQmFsbFwiO1xyXG5pbXBvcnQgUmltQ29udHJvbGxlciBmcm9tIFwiLi9SaW1Db250cm9sbGVyXCI7XHJcbmltcG9ydCBCYWxsIGZyb20gXCIuL0JhbGxcIjtcclxuaW1wb3J0IEJhbGxTcGF3biBmcm9tIFwiLi9CYWxsU3Bhd25cIjtcclxuaW1wb3J0IFVJTWFuYWdlciBmcm9tIFwiLi91aXNjcmlwdC9VSU1hbmFnZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5TY2VuZSBleHRlbmRzIExheWEuU2NyaXB0M0Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IDA7XHJcbiAgICAgICAgdGhpcy5iYWxsID0gMDtcclxuXHJcbiAgICAgICAgLy8qICogKiAqICogKiAqICogKiDliJ3lp4vljJbnmoTmlbDlgLxcclxuICAgICAgICB0aGlzLnJpbSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmltTW9kZWwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3RhcnRQb3MgPSAwO1xyXG4gICAgICAgIHRoaXMuYmV0d2VlblBvcyA9IDA7XHJcbiAgICAgICAgdGhpcy5lbmRQb3MgPSAwO1xyXG4gICAgICAgIHRoaXMudWlTY2VuZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yaW5nID0gbnVsbDtcclxuICAgICAgICAvLyB0aGlzLmdldFNjb3JlID0gMDtcclxuICAgICAgICAvLyogKiAqICogKiAqICogKiAqXHJcbiAgICB9XHJcblxyXG4gICAgb25TdGFydCgpIHtcclxuXHJcbiAgICAgICAgLy/or7vlj5blnLrmma9cclxuICAgICAgICB0aGlzLnNjZW5lID0gTGF5YS5sb2FkZXIuZ2V0UmVzKFwiTGF5YVNjZW5lX0xheWFFeHBvcnQvQ29udmVudGlvbmFsL0xheWFFeHBvcnQubHNcIik7XHJcblxyXG4gICAgICAgIHRoaXMub25Jbml0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkUmltQ29udHJvbGxlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFVJTWFuYWdlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZEJhbGxTcGF3bigpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBvbkluaXQoKSB7XHJcbiAgICAgICAgLy/ojrflj5bnr67nrZDniLboioLngrlcclxuICAgICAgICB0aGlzLnJpbSA9IHRoaXMuc2NlbmUuZ2V0Q2hpbGRCeU5hbWUoXCJSaW1Nb3ZlTm9kZVwiKTtcclxuICAgICAgICAvL+iOt+WPluaRhOWDj+aculxyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5zY2VuZS5nZXRDaGlsZEJ5TmFtZShcIk1haW4gQ2FtZXJhXCIpO1xyXG4gICAgICAgIC8v6I635Y+W56+u562QXHJcbiAgICAgICAgdGhpcy5yaW1Nb2RlbCA9IHRoaXMucmltLmdldENoaWxkQnlOYW1lKFwiUmltXCIpO1xyXG4gICAgICAgIC8v6I635Y+W56+u562Q55qE546vXHJcbiAgICAgICAgdGhpcy5yaW5nID0gdGhpcy5yaW0uZ2V0Q2hpbGRCeU5hbWUoXCJSaW5nXCIpO1xyXG4gICAgICAgIHRoaXMucmluZy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAvL+iOt+WPluW+l+WIhueahOinpuWPkeWZqFxyXG4gICAgICAgIC8vIHRoaXMuZ2V0U2NvcmUgPSB0aGlzLnJpbS5nZXRDaGlsZEJ5TmFtZShcIkdldFNjb3JlXCIpO1xyXG4gICAgICAgIC8v6I635Y+W55CD55qE6L+Q5Yqo6L2o6L+56IqC54K555qE54i26IqC54K5XHJcbiAgICAgICAgbGV0IGJlemllck5vZGUgPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiQmV6aWVyXCIpO1xyXG4gICAgICAgIC8v6I635Y+W55CD55qE5Yid5aeL5L2N572uXHJcbiAgICAgICAgdGhpcy5zdGFydFBvcyA9IGJlemllck5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJTdGFydFwiKTtcclxuICAgICAgICAvL+iOt+WPlueQg+eahOi/h+a4oeS9jee9rlxyXG4gICAgICAgIHRoaXMuYmV0d2VlblBvcyA9IGJlemllck5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJCZXR3ZWVuXCIpO1xyXG4gICAgICAgIC8v6I635Y+W55CD55qE57uI54K55L2N572uXHJcbiAgICAgICAgdGhpcy5lbmRQb3MgPSBiZXppZXJOb2RlLmdldENoaWxkQnlOYW1lKFwiRW5kXCIpO1xyXG4gICAgICAgIC8v6I635Y+W55CD55qE6aKE5Yi25L2TXHJcbiAgICAgICAgbGV0IGJhbGwgPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiYmFsbFwiKTtcclxuICAgICAgICB0aGlzLmJhbGwgPSBMYXlhLlNwcml0ZTNELmluc3RhbnRpYXRlKGJhbGwpO1xyXG4gICAgICAgIHRoaXMuYmFsbC5hZGRDb21wb25lbnQoQmFsbCk7XHJcbiAgICAgICAgLy/lj5bliLDnkIPnmoTpooTliLbkvZPlkI7lsIbnkIPlhbPpl61cclxuICAgICAgICBiYWxsLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFVJTWFuYWdlcigpIHtcclxuICAgICAgICBsZXQgdWlNYW5hZ2VyID0gdGhpcy5zY2VuZS5hZGRDb21wb25lbnQoVUlNYW5hZ2VyKTtcclxuICAgICAgICB1aU1hbmFnZXIuY2FtZXJhID0gdGhpcy5jYW1lcmE7XHJcbiAgICAgICAgdWlNYW5hZ2VyLnJpbSA9IHRoaXMucmltTW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUmltQ29udHJvbGxlcigpIHtcclxuICAgICAgICAvL+a3u+WKoOevruetkOaOp+WItue7hOS7tlxyXG4gICAgICAgIGxldCByaW1Db250cm9sbGVyID0gdGhpcy5zY2VuZS5hZGRDb21wb25lbnQoUmltQ29udHJvbGxlcik7XHJcblxyXG4gICAgICAgIC8v6LWL5YC8XHJcbiAgICAgICAgcmltQ29udHJvbGxlci5tYWluQ2FtZXJhID0gdGhpcy5jYW1lcmE7XHJcbiAgICAgICAgcmltQ29udHJvbGxlci5yaW0gPSB0aGlzLnJpbTtcclxuICAgICAgICAvLyByaW1Db250cm9sbGVyLnJpbmcgPSB0aGlzLnJpbmc7XHJcblxyXG4gICAgICAgIC8v5re75YqgVW5saXTmnZDotKjnkINcclxuICAgICAgICAvLyBsZXQgbWF0ZXJpYWwgPSBuZXcgTGF5YS5VbmxpdE1hdGVyaWFsKCk7XHJcbiAgICAgICAgLy8gbWF0ZXJpYWwuYWxiZWRvQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3IzKC44LCAwLCAwKTtcclxuICAgICAgICAvLyBtYXRlcmlhbC5hbGJlZG9JbnRlbnNpdHkgPSAxO1xyXG5cclxuICAgICAgICAvLyBsZXQgZWZmZWN0TWF0ZXJpYWwgPSBuZXcgTGF5YS5FZmZlY3RNYXRlcmlhbCgpO1xyXG4gICAgICAgIC8vIExheWEuVGV4dHVyZTJELmxvYWQoXCJMYXlhU2NlbmVfTGF5YUV4cG9ydC9Db252ZW50aW9uYWwvQXNzZXRzL1RleHR1cmVzL1RleF9CaW5nby5wbmdcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCBmdW5jdGlvbiAodGV4KSB7XHJcbiAgICAgICAgLy8gICAgIGVmZmVjdE1hdGVyaWFsLnRleHR1cmUgPSB0ZXg7XHJcbiAgICAgICAgLy8gICAgIGVmZmVjdE1hdGVyaWFsLmFsYmVkb0NvbG9yID0gbmV3IExheWEuVmVjdG9yMyguOCwgMCwgMCk7XHJcbiAgICAgICAgLy8gfSkpXHJcblxyXG4gICAgICAgIC8v5pu05o2i56+u562Q5p2Q6LSoXHJcbiAgICAgICAgLy8gdGhpcy5yaW1Nb2RlbC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBtYXRlcmlhbDtcclxuICAgICAgICAvLyB0aGlzLnJpbmcubWVzaFJlbmRlcmVyLm1hdGVyaWFsID0gZWZmZWN0TWF0ZXJpYWw7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yaW1Nb2RlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQmFsbFNwYXduKCkge1xyXG4gICAgICAgIC8v5re75Yqg56+u55CD55Sf5oiQ5ZmoXHJcbiAgICAgICAgbGV0IGJhbGxTcGF3biA9IHRoaXMuc2NlbmUuYWRkQ29tcG9uZW50KEJhbGxTcGF3bik7XHJcbiAgICAgICAgYmFsbFNwYXduLmJhbGwgPSB0aGlzLmJhbGw7XHJcbiAgICAgICAgYmFsbFNwYXduLnN0YXJ0UG9zID0gdGhpcy5zdGFydFBvcy50cmFuc2Zvcm0ucG9zaXRpb247XHJcbiAgICAgICAgYmFsbFNwYXduLmJldHdlZW5Qb3MgPSB0aGlzLmJldHdlZW5Qb3MudHJhbnNmb3JtLnBvc2l0aW9uO1xyXG4gICAgICAgIGJhbGxTcGF3bi5lbmRQb3MgPSB0aGlzLmVuZFBvcy50cmFuc2Zvcm0ucG9zaXRpb247XHJcbiAgICAgICAgLy8gYmFsbFNwYXduLmdldFNjb3JlID0gdGhpcy5nZXRTY29yZTtcclxuICAgIH1cclxuXHJcblxyXG59IiwiLy9pbXBvcnQgUmluZ0FuaW1hdG9yU3RhdGVTY3JpcHQgZnJvbSBcIi4vUmluZ0FuaW1hdG9yU3RhdGVTY3JpcHRcIjtcclxuaW1wb3J0IE1haW5TY2VuZSBmcm9tIFwiLi9NYWluU2NlbmVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJpbUNvbnRyb2xsZXIgZXh0ZW5kcyBMYXlhLlNjcmlwdDNEIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMucmF5ID0gMDtcclxuICAgICAgICB0aGlzLnBvaW50ID0gMDtcclxuICAgICAgICB0aGlzLnJpbSA9IDA7XHJcbiAgICAgICAgdGhpcy5tYWluQ2FtZXJhID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlzQ2xpY2sgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgIC8vdGhpcy5pbml0Q2Fubm9uKCk7XHJcblxyXG4gICAgICAgIGxldCB2ZWN0b3JaZXJvID0gbmV3IExheWEuVmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICB0aGlzLnJheSA9IG5ldyBMYXlhLlJheSh2ZWN0b3JaZXJvLCB2ZWN0b3JaZXJvKTtcclxuICAgICAgICB0aGlzLnBvaW50ID0gbmV3IExheWEuVmVjdG9yMigpO1xyXG5cclxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5Nb3VzZURvd24pO1xyXG4gICAgICAgIExheWEuc3RhZ2Uub24oTGF5YS5FdmVudC5NT1VTRV9VUCwgdGhpcywgdGhpcy5Nb3VzZVVwKTtcclxuICAgIH1cclxuXHJcbiAgICBNb3VzZURvd24oKSB7XHJcbiAgICAgICAgdGhpcy5pc0NsaWNrID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBvblVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLlJpbU1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBSaW1Nb3ZlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ2xpY2spIHtcclxuICAgICAgICAgICAgdGhpcy5wb2ludC54ID0gTGF5YS5Nb3VzZU1hbmFnZXIuaW5zdGFuY2UubW91c2VYO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50LnkgPSBMYXlhLk1vdXNlTWFuYWdlci5pbnN0YW5jZS5tb3VzZVk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1haW5DYW1lcmEudmlld3BvcnRQb2ludFRvUmF5KHRoaXMucG9pbnQsIHRoaXMucmF5KTtcclxuICAgICAgICAgICAgdGhpcy5yYXlDYXN0SGl0ID0gbmV3IExheWEuSGl0UmVzdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIucGh5c2ljc1NpbXVsYXRpb24ucmF5Q2FzdCh0aGlzLnJheSwgdGhpcy5yYXlDYXN0SGl0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJheUNhc3RIaXQuc3VjY2VlZGVkICYmIHRoaXMucmF5Q2FzdEhpdC5jb2xsaWRlci5vd25lci5uYW1lID09PSBcIlJpbUJhY2tncm91bmRcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yaW0udHJhbnNmb3JtLnBvc2l0aW9uID0gbmV3IExheWEuVmVjdG9yMyhcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheUNhc3RIaXQucG9pbnQueCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpbS50cmFuc2Zvcm0ucG9zaXRpb24ueSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpbS50cmFuc2Zvcm0ucG9zaXRpb24uelxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBNb3VzZVVwKCkge1xyXG4gICAgICAgIHRoaXMuaXNDbGljayA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRDYW5ub24oKSB7XHJcbiAgICAgICAgbGV0IHdvcmxkID0gbmV3IENBTk5PTi5Xb3JsZCgpO1xyXG4gICAgICAgIHdvcmxkLmJyb2FkcGhhc2UgPSBuZXcgQ0FOTk9OLk5haXZlQnJvYWRwaGFzZSgpO1xyXG4gICAgICAgIHdvcmxkLmdyYXZpdHkuc2V0KDAsIC05LjgyLCAwKTtcclxuICAgICAgICB3b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IDIwO1xyXG5cclxuICAgICAgICAvLyBNYXRlcmlhbHNcclxuICAgICAgICB2YXIgY2xvdGhNYXRlcmlhbCA9IG5ldyBDQU5OT04uTWF0ZXJpYWwoKTtcclxuICAgICAgICB2YXIgc3BoZXJlTWF0ZXJpYWwgPSBuZXcgQ0FOTk9OLk1hdGVyaWFsKCk7XHJcbiAgICAgICAgdmFyIGNsb3RoU3BoZXJlQ29udGFjdE1hdGVyaWFsID0gbmV3IENBTk5PTi5Db250YWN0TWF0ZXJpYWwoY2xvdGhNYXRlcmlhbCxcclxuICAgICAgICAgICAgc3BoZXJlTWF0ZXJpYWwsXHJcbiAgICAgICAgICAgIDAuMCwgLy8gZnJpY3Rpb24gY29lZmZpY2llbnRcclxuICAgICAgICAgICAgMC4wICAvLyByZXN0aXR1dGlvblxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIEFkanVzdCBjb25zdHJhaW50IGVxdWF0aW9uIHBhcmFtZXRlcnMgZm9yIGdyb3VuZC9ncm91bmQgY29udGFjdFxyXG4gICAgICAgIGNsb3RoU3BoZXJlQ29udGFjdE1hdGVyaWFsLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcyA9IDFlOTtcclxuICAgICAgICBjbG90aFNwaGVyZUNvbnRhY3RNYXRlcmlhbC5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gMztcclxuXHJcbiAgICAgICAgLy8gQWRkIGNvbnRhY3QgbWF0ZXJpYWwgdG8gdGhlIHdvcmxkXHJcbiAgICAgICAgd29ybGQuYWRkQ29udGFjdE1hdGVyaWFsKGNsb3RoU3BoZXJlQ29udGFjdE1hdGVyaWFsKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHNwaGVyZVxyXG4gICAgICAgIHZhciBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDAuMTUpO1xyXG4gICAgICAgIHZhciBzcGhlcmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHtcclxuICAgICAgICAgICAgbWFzczogMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzcGhlcmVCb2R5LmFkZFNoYXBlKHNwaGVyZVNoYXBlKTtcclxuICAgICAgICBzcGhlcmVCb2R5LnBvc2l0aW9uLnNldCgwLCAwLCAwKTtcclxuICAgICAgICB3b3JsZC5hZGQoc3BoZXJlQm9keSk7XHJcblxyXG4gICAgICAgIHZhciBwYXJ0aWNsZXMgPSBbXTtcclxuICAgICAgICAvL+iOt+WPlue9keagvOmhtueCuVxyXG4gICAgICAgIExheWEuTWVzaC5sb2FkKFwicmVzL3RocmVlRGltZW4vc2tpbk1vZGVsL0xheWFNb25rZXkvQXNzZXRzL0xheWFNb25rZXkvTGF5YU1vbmtleS1MYXlhTW9ua2V5LmxtXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5sb2FkU3ByaXRlM0QpKTtcclxuXHJcbiAgICAgICAgLy8gZm9yICggdmFyIGkgPSAwLCBpbCA9IE54KzE7IGkgIT09IGlsOyBpKysgKSB7XHJcbiAgICAgICAgLy8gICAgIHBhcnRpY2xlcy5wdXNoKFtdKTtcclxuICAgICAgICAvLyAgICAgZm9yICggdmFyIGogPSAwLCBqbCA9IE55KzE7IGogIT09IGpsOyBqKysgKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgaWR4ID0gaiooTngrMSkgKyBpO1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIHAgPSBjbG90aEZ1bmN0aW9uKGkvKE54KzEpLCBqLyhOeSsxKSk7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgcGFydGljbGUgPSBuZXcgQ0FOTk9OLkJvZHkoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIG1hc3M6IGo9PU55ID8gMCA6IG1hc3NcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgcGFydGljbGUuYWRkU2hhcGUobmV3IENBTk5PTi5QYXJ0aWNsZSgpKTtcclxuICAgICAgICAvLyAgICAgICAgIHBhcnRpY2xlLmxpbmVhckRhbXBpbmcgPSAwLjU7XHJcbiAgICAgICAgLy8gICAgICAgICBwYXJ0aWNsZS5wb3NpdGlvbi5zZXQoXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcC54LFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHAueS1OeSAqIDAuOSAqIHJlc3REaXN0YW5jZSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBwLnpcclxuICAgICAgICAvLyAgICAgICAgICk7XHJcbiAgICAgICAgLy8gICAgICAgICBwYXJ0aWNsZXNbaV0ucHVzaChwYXJ0aWNsZSk7XHJcbiAgICAgICAgLy8gICAgICAgICB3b3JsZC5hZGQocGFydGljbGUpO1xyXG4gICAgICAgIC8vICAgICAgICAgcGFydGljbGUudmVsb2NpdHkuc2V0KDAsMCwtMC4xKihOeS1qKSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFNwcml0ZTNEKG1lc2gpIHtcclxuXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVSU1hbmFnZXIgZXh0ZW5kcyBMYXlhLlNjcmlwdDNEIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJpbSA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuc2NvcmVMYWJlbCA9IDA7XHJcbiAgICAgICAgdGhpcy5zaW5nbGVTY29yZUxhYmVsID0gMDtcclxuICAgICAgICB0aGlzLnNwcml0ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbFNjb3JlID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuZ2V0U29yY2VMYWJlbCgpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyRXZlbnQoKSB7XHJcbiAgICAgICAgLy/lpoLmnpzmipXkuK3kvr/lvpfliIbvvIEoQmFsbClcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKFwiZ2V0U2NvcmVcIiwgdGhpcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsZXQgdHdlZW4gPSBMYXlhLlR3ZWVuLnRvKHRoaXMuc2luZ2xlU2NvcmVMYWJlbCwgeyB5OiAtNDAsIGFscGhhOiAxIH0sIDMwMCwgbnVsbCwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZVNjb3JlTGFiZWwuYWxwaGEgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVTY29yZUxhYmVsLnkgPSAwO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjb3JlICs9IDE7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zY29yZSA8PSAxKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVTY29yZUxhYmVsLmNvbG9yID0gXCIjZmZmZmZmXCI7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlU2NvcmVMYWJlbC5jb2xvciA9IFwiI2ZmZjk3MFwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50b3RhbFNjb3JlICs9IHRoaXMuc2NvcmU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNjb3JlTGFiZWwudGV4dCA9IHRoaXMuc2NvcmU7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmVMYWJlbC50ZXh0ID0gXCJTY29yZSA6XCIgKyB0aGlzLnRvdGFsU2NvcmU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5aaC5p6c56Kw5Yiw55CD5qGG5oiW6ICF6LSl6IK+77yM5YiZ5riF56m66L+e5Lit5Yqg5oiQ5YiG5pWwKEJhbGwpXHJcbiAgICAgICAgTGF5YS5zdGFnZS5vbihcIm91dFNjb3JlXCIsIHRoaXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5zY29yZSA9IDA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5aaC5p6c5rKh5pyJ6L+e57ut5oqV5Lit77yM5YiZ5YWz6Zet54m55pWIKEJhbGxTcGF3bilcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKFwiZWZmZWN0XCIsIHRoaXMsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3JlIDw9IDEpIHtcclxuICAgICAgICAgICAgICAgIGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL+iOt+WPllVJ5Zy65pmv5LiL55qE5Lik5LiqTGFiZWxcclxuICAgIGdldFNvcmNlTGFiZWwoKSB7XHJcbiAgICAgICAgLy/mib7liLBVSeWcuuaZr+eahOagueiKgueCuVxyXG4gICAgICAgIGxldCByb290ID0gTGF5YS5zdGFnZS5nZXRDaGlsZEJ5TmFtZShcInJvb3RcIik7XHJcblxyXG4gICAgICAgIC8v6I635Y+W5YiwR2FtZVVJ5a+56LGhXHJcbiAgICAgICAgbGV0IGdhbWVVSSA9IHJvb3QuZ2V0Q2hpbGRBdCgwKTtcclxuICAgICAgICB0aGlzLnNjb3JlTGFiZWwgPSBnYW1lVUkuZ2V0Q2hpbGRBdCgwKTtcclxuICAgICAgICB0aGlzLnNwcml0ZSA9IGdhbWVVSS5nZXRDaGlsZEF0KDEpO1xyXG4gICAgICAgIHRoaXMuc2luZ2xlU2NvcmVMYWJlbCA9IHRoaXMuc3ByaXRlLmdldENoaWxkQXQoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5Xb3JsZFRvVmlld1BvcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5LiW55WM6L2s6KeG5Zu+5Z2Q5qCHXHJcbiAgICBXb3JsZFRvVmlld1BvcygpIHtcclxuICAgICAgICBsZXQgb3V0UG9zID0gbmV3IExheWEuVmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICB0aGlzLmNhbWVyYS52aWV3cG9ydC5wcm9qZWN0KHRoaXMucmltLnRyYW5zZm9ybS5wb3NpdGlvbiwgdGhpcy5jYW1lcmEucHJvamVjdGlvblZpZXdNYXRyaXgsIG91dFBvcyk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUueCA9IG91dFBvcy54IC0gdGhpcy5zcHJpdGUud2lkdGggLyAyO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnkgPSBvdXRQb3MueSAtIHRoaXMuc3ByaXRlLmhlaWdodCAvIDI7XHJcbiAgICB9XHJcbn0iLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxudmFyIFZpZXc9bGF5YS51aS5WaWV3O1xyXG52YXIgRGlhbG9nPWxheWEudWkuRGlhbG9nO1xyXG52YXIgU2NlbmU9TGF5YS5TY2VuZTtcclxudmFyIFJFRyA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxudmFyIFRlc3RTY2VuZVVJPShmdW5jdGlvbihfc3VwZXIpe1xyXG5cdFx0ZnVuY3Rpb24gVGVzdFNjZW5lVUkoKXtcclxuXHRcdFx0XHJcblx0XHRcdFRlc3RTY2VuZVVJLl9fc3VwZXIuY2FsbCh0aGlzKTtcclxuXHRcdH1cclxuXHQvL1x0Q0xBU1MkKFRlc3RTY2VuZVVJLCd1aS50ZXN0LlRlc3RTY2VuZVVJJyxfc3VwZXIpO1xyXG5cdFx0dmFyIF9fcHJvdG9fXz1UZXN0U2NlbmVVSS5wcm90b3R5cGU7XHJcblx0XHRfX3Byb3RvX18uY3JlYXRlQ2hpbGRyZW49ZnVuY3Rpb24oKXtcclxuXHRcdFx0X3N1cGVyLnByb3RvdHlwZS5jcmVhdGVDaGlsZHJlbi5jYWxsKHRoaXMpO1xyXG5cdFx0XHR0aGlzLmxvYWRTY2VuZShcInRlc3QvVGVzdFNjZW5lXCIpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIFRlc3RTY2VuZVVJO1xyXG5cdH0pKFNjZW5lKTsiXX0=
